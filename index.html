<!DOCTYPE html>
<html lang="en">

<head>

    <link rel="shortcut icon" type="image/x-icon" href="plexlanding.ico" />`
    <meta http-equiv="refresh" content="10">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <style>
        body.offline #link-bar {
            display: none;
        }
        
        body.online #link-bar {
            display: block;
        }
        
        span {
            color: green;
        }
    </style>

    <script src="/monitorr/assets/js/ping.js" type="text/javascript"></script>

    <title>VREE's PLEX Server Status</title>


    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles -->
    <link href="assets/css/main.css" rel="stylesheet">

    <!-- Fonts from Google Fonts -->
    <link href='//fonts.googleapis.com/css?family=Lato:300,400,900' rel='stylesheet' type='text/css'>


</head>

<body>

    <div class="container" id="link-bar">

        <div class="row mt centered">

            <div class="col-lg-4" style="top: -20px">
                <a href="https://app.plex.tv/web/app" target="_blank">
                    <img src="assets/img/s01.png" width="55" alt="">
                    <br> <br>
                    <p><strong>PLEX Web Access</strong>
                        <p>
                </a>
                <span id="ping-plex"></span>
            </div>
            <!--/col-lg-4 -->
            </a>

            <div class="col-lg-4" style="top: -20px">
                <a href="https://YOURDOMAIN.com/plexrequest" target="_blank">
                    <img src="assets/img/s02.png" width="55" alt="">
                    <br> <br>
                    <p><strong>PLEX Request</strong>
                        <p>
                </a>
                <span id="ping-plexrequest"></span>
            </div>
            <!--/col-lg-4 -->

            <div class="col-lg-4" style="top: -20px">
                <a href="https://YOURDOMAIN.com/plexlist/#1" target="_blank">
                    <img src="assets/img/s03.png" width="55" alt="">
                    <br><br>
                    <p><strong>PLEX Library</strong>
                        <p>
                </a>
                <span id="ping-plexlist"></span>

            </div>
            <!--/col-lg-4 -->

        </div>
        <!-- /row -->
    </div>

    <script>
        var p = new Ping();

        p.ping("https://YOURDOMAIN.com:32400", function(err, data) {
            if (err) {
                console.log("error loading resource")
                data = " " + err +
                    // PLEX NOT WORKING, set to manual online 
                    " <a href='https://plex.tv/web' target='_blank'> <img src='/monitorr/assets/img/online.png' width='115'> ";
            } else {
                data = " " +
                    " <a href='https://plex.tv/web' target='_blank'> <img src='/monitorr/assets/img/online.png' width='115'>  ";
            }
            document.getElementById("ping-plex").innerHTML = data;
        });

        p.ping("http://YOURDOMAIN.com:3579", function(err, data) {
            if (err) {
                console.log("error loading resource")
                data = " " + err +
                    " <a href='https://stats.uptimerobot.com/' target='_blank'> <img src='/monitorr/assets/img/offline.png' width='115'>  ";
            } else {
                data = " " +
                    " <a href='https://YOURDOMAIN.com/plexrequest' target='_blank'> <img src='/monitorr/assets/img/online.png' width='115'>  ";
            }
            document.getElementById("ping-plexrequest").innerHTML = data;
        });

        p.ping("https://YOURDOMAIN.com/plexlibrary", function(err, data) {
            if (err) {
                console.log("error loading resource")
                data = " " + err +
                    " <a href='https://stats.uptimerobot.com' target='_blank'> <img src='/monitorr/assets/img/offline.png' width='115'>  ";
            } else {
                data = " " +
                    " <a href='https://YOURDOMAIN.com/plexlibrary' target='_blank'> <img src='/monitorr/assets/img/online.png' width='115'>  ";
            }
            document.getElementById("ping-plexlist").innerHTML = data;
        });
    </script>

</body>

</html>